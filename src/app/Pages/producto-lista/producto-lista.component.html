<div class="container text-center" style="margin: 30px;" *ngIf="!userLoginOn">
  <p>Debes iniciar sesi贸n</p>
</div>
<div class="container text-center" style="margin: 30px;" *ngIf="userLoginOn">
  <h3>
    Bienvenido {{userData?.name}}
    administra tus productos
  </h3>

  <br>

  <table class="table table-striped table-hover align-middle">
    <thead class="table-dark">
      <tr>
        <th scope="col">Id</th>
        <th scope="col">Nombre</th>
        <th scope="col">Descripci贸n</th>
        <th scope="col">Precio</th>
        <th scope="col">Stock</th>
        <th scope="col">Funciones</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let producto of productos">
        <th scope="row">{{producto.idProducto}}</th>
        <td>{{producto.nombreProducto}}</td>
        <td>{{producto.descripcion}}</td>
        <td>{{producto.precio}}</td>
        <td>{{producto.stock}}</td>
        <td class="text-center">
          <div>
            <button (click)="editarProducto(producto.idProducto)" type="button" class="btn btn-warning btn-sm me-3"
              data-bs-toggle="modal" data-bs-target="#modalEdit">Editar</button>
            <button (click)="eliminarProducto(producto.idProducto)" type="button"
              class="btn btn-danger btn-sm me-3">Eliminar</button>
          </div>
        </td>
      </tr>

    </tbody>
  </table>


  <!-- Boton nuevo producto -->
  <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#modalAdd">
    Agregar nuevo producto
  </button>

  <!----- Modal Agregar Producto ----->
  <div class="modal fade" id="modalAdd" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h1 class="modal-title fs-5" id="exampleModalLabel">Ingresa tu producto</h1>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <form #formAdd (ngSubmit)="onSubmitAdd()">
          <div class="modal-body">
            <div class="mb-3">
              <label for="nombreProducto" class="form-label">Nombre del producto</label>
              <input type="text" class="form-control" id="nombreProducto" name="nombreProducto" required="true"
                [(ngModel)]="producto.nombreProducto">
            </div>
            <div class="mb-3">
              <label for="descripcion" class="form-label">Descripci贸n del producto</label>
              <input type="text" class="form-control" id="descripcion" name="descripcion" required="true"
                [(ngModel)]="producto.descripcion">
            </div>
            <div class="mb-3 form-check">
              <label for="precio" class="form-label">Precio del producto</label>
              <input type="number" class="form-control" id="precio" name="precio" required="true"
                [(ngModel)]="producto.precio">
            </div>
            <div class="mb-3 form-check">
              <label for="stock" class="form-label">Stock del producto</label>
              <input type="number" class="form-control" id="stock" name="stock" required="true"
                [(ngModel)]="producto.stock">
            </div>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cerrar</button>
            <button type="submit" class="btn btn-primary" data-bs-dismiss="modal">Agregar producto</button>
          </div>
        </form>
      </div>
    </div>
  </div>
  <!----- Modal ----->


  <!----- Modal Editar Producto ----->
  <div class="modal fade" id="modalEdit" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h1 class="modal-title fs-5" id="exampleModalLabel">Modifica tu producto</h1>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <form (ngSubmit)="onSubmitEdit(productoEdit.idProducto)">
          <div class="modal-body">
            <div class="mb-3">
              <label for="nombreProducto" class="form-label">Nombre del producto</label>
              <input type="text" class="form-control" id="nombreProducto" name="nombreProducto" required="true"
                [(ngModel)]="productoEdit.nombreProducto">
            </div>
            <div class="mb-3">
              <label for="descripcion" class="form-label">Descripci贸n del producto</label>
              <input type="text" class="form-control" id="descripcion" name="descripcion" required="true"
                [(ngModel)]="productoEdit.descripcion">
            </div>
            <div class="mb-3 form-check">
              <label for="precio" class="form-label">Precio del producto</label>
              <input type="number" class="form-control" id="precio" name="precio" required="true"
                [(ngModel)]="productoEdit.precio">
            </div>
            <div class="mb-3 form-check">
              <label for="stock" class="form-label">Stock del producto</label>
              <input type="number" class="form-control" id="stock" name="stock" required="true"
                [(ngModel)]="productoEdit.stock">
            </div>
          </div>
          <div class="modal-footer">
            <button type="button" (click)="cancel" class="btn btn-secondary" data-bs-dismiss="modal">Cerrar</button>
            <button type="submit" class="btn btn-primary" data-bs-dismiss="modal">Guardar producto</button>
          </div>
        </form>
      </div>
    </div>
  </div>
  <!----- Modal ----->


</div>